<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Meta Information</title>
</head>

<body>

<h2>Providing Meta Information</h2>

<p>BDD encourages as much information as is meaningful to the
business to be included in the stories and scenarios. But as these
stories and scenarios grow it may become difficult to navigate through
all this information. It will also become necessary to organise the
growing number of stories by different criterias.</p>

<p>To help users better manage their stories, JBehave allow the
specification of meta information, both at story and scenario level.</p>

<pre class="brush: bdd">
    Meta:
    @author Mauro
    @themes UI Usability

    Scenario:  A scenario in which the user can view all relevant information via UI    
    Meta:
    @skip false    
    Given ... // normal scenario steps

    Scenario:  A scenario which we cannot run every time due to some technical contraint
    Meta:
    @skip true    
    Given ... // normal scenario steps
</pre>

<p>When JBehave encounters the keyword <b>Meta:</b>, it collects the
provided name-value properties, separated by property keyword <b>@</b>.
Both keywords are configurable and localizable.</p>

<p>By convention, the first space in the property separates the name
from the value, e.g. in the property "themes UI Usability", the name is
"themes" and the value is "UI Usability".</p>

<p>Note that spaces are also allowed after the property keyword <b>@</b>,
but these will be ignored in the parsing. E.g. if we wrote:</p>

<pre class="brush: bdd">
    Meta:
    @ author Mauro
    @ themes UI Usability
</pre>

<p>the property names would still be "author" and "themes".</p>

<p>It is important to note that the meta property names are not
constrained so users can chose whatever names are most appropriate for
the information they are trying to convey. The properties are collected
as part of the story and scenario parsing and made available for
arbitrary purposes, e.g. filtering in the running of the stories.</p>

<h2>Filtering on Meta Information</h2>

<p>Once we have defined the meta properties, we can use a filter to
allow or not the running of a given story or scenario based on the meta
information. The filtering is controlled by the <a
	href="javadoc/core/org/jbehave/core/embedder/MetaFilter.html">MetaFilter</a>
via the <a href="javadoc/core/org/jbehave/core/embedder/Embedder.html">Embedder</a>:
</p>

<pre class="brush: java">

    Embedder embedder = ... // define as required
    embedder.useMetaFilters(asList("+author Mauro", "+theme filtering", "-skip"));
    
</pre>

<p>The filters are expressed as sequence of meta properties, where
the property keyword "@" is replaced by "+" or "-" according to whether
the property should be included or excluded by the filter.</p>

<p>The meta filter can also be specified via Ant or Maven, using the
"metaFilters" attribute or configuration element.</p>

<h2>Story Mapping</h2>

<p>The meta filters can also be used to create Story Maps, where
each filter a subset of stories that are allowed by the filter.</p>

<script type="syntaxhighlighter" class="brush: xml">
<![CDATA[
      <plugin>
        <groupId>org.jbehave</groupId>
        <artifactId>jbehave-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>map-stories</id>
            <phase>integration-test</phase>
            <configuration>
              <includes>
                <include>${include.paths}</include>
              </includes>
              <metaFilters>
                <metaFilter>+author *</metaFilter>
                <metaFilter>+theme *</metaFilter>
                <metaFilter>-skip</metaFilter>
              </metaFilters>              
            </configuration>
            <goals>
              <goal>map-stories-as-paths</goal>
            </goals>
          </execution>
        </executions>
      </plugin>    
]]>
</script>

<p>The resulting output is found in <b>target/jbehave-reports/maps.html</b>,
which uses a Swim Lane view to display the results of the mapping.</p>

<div class="clear">
<hr />
</div>

</body>
</html>
