<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Writing stories in your language</title>
</head>

<body>

<h2>Writing stories in your language</h2>

<p>Good and effective communication is key to BDD. Therefore,
writing stories in the <a href="http://en.wikipedia.org/wiki/Language">language</a>
spoken by the business users is essential. And even though the patterns
used to match the scenario steps to Java methods can be written in any
language, the <a
    href="javadoc/core/org/jbehave/core/configuration/Keywords.html">Keywords</a>
still need to be expressed in different languages.</p>

<p>JBehave by default uses English as the scenario language. By
supporting the internationalisation (i18n) of keywords by Java <a
    href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Locale.html">Locale</a>,
it also allows the stories to be written in any language. All is
needed to configure the use of <a
    href="javadoc/core/org/jbehave/core/i18n/LocalizedKeywords.html">LocalizedKeywords</a>
for a given locale. Each locale has a separate keywords properties file, e.g. for Italian 
<b>i18n/keywords_it.properties</b> contained in the <b>jbehave-core.jar</b>.
</p>
<p>We need to configure the use of the localized keywords, e.g.:</p>
<pre class="brush: java">
public class ItTraderStory extends JUnitStory {

	public ItTraderStory() {
        // use Italian for keywords
        ClassLoader classLoader = this.getClass().getClassLoader();
        Keywords keywords = new LocalizedKeywords(new Locale("it"));
        Configuration configuration = new MostUsefulConfiguration()
                .useStoryPathResolver(new UnderscoredCamelCaseResolver(".story"))
                .useKeywords(keywords)
                .useStoryParser(new RegexStoryParser(keywords))
                .useStoryLoader(
                        new LoadFromClasspath(classLoader))
                .useDefaultStoryReporter(new ConsoleOutput(keywords))
                .useStoryReporterBuilder(new StoryReporterBuilder()
                    .withCodeLocation(codeLocation)
                    .withDefaultFormats()
                    .withFormats(CONSOLE, TXT, HTML, XML)
                    .withFailureTrace(false)
                    .withKeywords(keywords))
        useConfiguration(configuration);
        addSteps(new InstanceStepsFactory(configuration, new ItTraderSteps()).createCandidateSteps());
    }

}
</pre>
<p>The parsing of the story with then understand the language that has been configured
via the localized keywords and the patterns annotating the Steps methods must be in the same language:</p>

<pre class="brush: java">
public class ItTraderSteps {

    private Stock stock;
    private ExamplesTable table;

    @Given("ho un'azione con simbolo $symbol e una soglia di $threshold")
    public void aStock(@Named("symbol") String symbol, @Named("threshold") double threshold) {
        stock = new Stock(symbol, threshold);
    }

}
</pre>
<p>Note that the localized keywords not only allow the translation of
the keywords used in parsing the textual story, but also the keywords
used in the reporting of the story execution, e.g. <b>Pending</b>, <b>NotPerformed</b>
and <b>Failed</b>.</p>

<h2>What languages are supported out-of-the-box?</h2>

<p>JBehave supports a number of languages out-of-the-box, allowing users
to simply specify the locale in the <a
    href="javadoc/core/org/jbehave/core/i18n/LocalizedKeywords.html">LocalizedKeywords</a>.  You 
can verify which language is supported by looking at the <b>i18n/</b> directory in the <b>jbehave-core-resources.zip</b>.
If you'd like your language to be supported, you can contribute the keywords in that language and we'll happily add it.
</p>

<span class="followup">Note that Java resource bundles require non-English language characters to be expressed as Unicode escaped characters 
(of the form \uxxxx where xxxx is 4-digit Hexadecimal number), using ISO-8859-1 encoding.
There are a number of tools that enable easy conversion between your non-English language characters and Unicode escaped characters.
</span>

<h2>What encoding should I use for textual stories and Java source classes?</h2>

<span class="followup">Always use encoding <b>UTF-8</b> for textual stories and Java source classes.</span>

<div class="clear">
<hr />
</div>

</body>
</html>
